<link rel="import" href="../bower_components/polymer/polymer.html">

<link rel="import" href="../bower_components/app-route/app-route.html">
<link rel="import" href="../bower_components/app-route/app-location.html">

<link rel="import" href="../bower_components/font-roboto/font-roboto.html">

<link rel="import" href="../bower_components/iron-image/iron-image.html">
<link rel="import" href="../bower_components/iron-pages/iron-pages.html">

<link rel="import" href="../bower_components/paper-button/paper-button.html">

<link rel="import" href="xtrm-home.html">
<link rel="import" href="xtrm-button.html">
<link rel="import" href="xtrm-login-confirmation.html">
<link rel="import" href="xtrm-login-dialog.html">

<dom-module id="xtrm-sports">
  <template>
    <style>
      :root {
        --primary-color: #FF0F03;
      }
      :host {
        position: relative;
        display: block;
        width: 100%;
        height: 100%;
        color: #fff;
      }
      iron-image {
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        filter: blur(3px);
        -webkit-filter: blur(3px);
      }
      iron-pages > * {
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
      }
      #login {
        position: absolute;
        top: 0;
        right: 0;
        z-index: 1;
      }
    </style>
    <app-location route="{{route}}"></app-location>
    <app-route
      route="{{route}}"
      pattern="/:page"
      data="{{data}}"
      tail="{{tail}}">
    </app-route>

    <iron-image src="images/background.jpeg" sizing="cover"></iron-image>
    <xtrm-button id="login" on-tap="login">Login</xtrm-button>
    <iron-pages id="pageSelector" attr-for-selected="page" fallback-selection="home" selected="[[data.page]]">
      <xtrm-home page="home"></xtrm-home>
      <xtrm-location-info page="location" route="[[tail]]"></xtrm-location-info>
      <xtrm-login-confirmation page="confirm" route="[[tail]]"></xtrm-login-confirmation>
    </iron-pages>
    <xtrm-login-dialog id="loginDialog"></xtrm-login-dialog>
  </template>
  <script>
    Polymer({
      is: 'xtrm-sports',

      listeners: {
        'setPage': '_setPage'
      },

      login: function() {
        this.$.loginDialog.open();
      },

      /*
      * Event e
      *   e.page: dom to show
      */
      _setPage: function(e){
          history.pushState(null, null, e.detail.page);
      }
    });
  </script>
</dom-module>